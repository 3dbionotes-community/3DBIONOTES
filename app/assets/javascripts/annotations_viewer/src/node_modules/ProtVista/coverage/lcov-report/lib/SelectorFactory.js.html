<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for lib/SelectorFactory.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../prettify.css">
    <link rel="stylesheet" href="../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header low">
    <h1>Code coverage report for <span class="entity">lib/SelectorFactory.js</span></h1>
    <h2>
        Statements: <span class="metric">18.75% <small>(6 / 32)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">0% <small>(0 / 8)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">25% <small>(1 / 4)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">18.75% <small>(6 / 32)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../index.html">All files</a> &#187; <a href="index.html">lib/</a> &#187; SelectorFactory.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span></td><td class="text"><pre class="prettyprint lang-js">/*jslint node: true */
/*jshint laxbreak: true */
"use strict";
&nbsp;
var d3 = require("d3");
&nbsp;
var SelectorFactory = function() {
    return {
        createSelectionShadow: <span class="fstat-no" title="function not covered" >function(svg, height) {</span>
<span class="cstat-no" title="statement not covered" >            svg.append('g').append('rect')</span>
                .classed('up_pftv_shadow', true)
                .attr('x', 0)
                .attr('y', 0)
                .attr('height', height)
                .attr('width', 0);
        }
    };
}();
&nbsp;
SelectorFactory.updateShadow = <span class="fstat-no" title="function not covered" >function(feature, elem, fv) {</span>
<span class="cstat-no" title="statement not covered" >    var selectedElem = d3.select(elem);</span>
<span class="cstat-no" title="statement not covered" >    var aaWidth = fv.xScale(2) - fv.xScale(1);</span>
<span class="cstat-no" title="statement not covered" >    var width = aaWidth * (feature.end ? feature.end - feature.begin + 1 : 1);</span>
<span class="cstat-no" title="statement not covered" >    var gapRegion = aaWidth/2;</span>
<span class="cstat-no" title="statement not covered" >    var transform = selectedElem.attr('transform');</span>
<span class="cstat-no" title="statement not covered" >    transform = transform.substring(0, transform.indexOf(','));</span>
<span class="cstat-no" title="statement not covered" >    d3.selectAll('.up_pftv_shadow')</span>
        .attr('x', -(gapRegion))
        .attr('width', width)
        .attr('transform', transform + ',0)');
};
&nbsp;
SelectorFactory.selectFeature = <span class="fstat-no" title="function not covered" >function(feature, elem, fv) {</span>
<span class="cstat-no" title="statement not covered" >    var selectedElem = d3.select(elem);</span>
<span class="cstat-no" title="statement not covered" >    var previousSelection = {feature: fv.selectedFeature, elem: fv.selectedFeatureElement};</span>
<span class="cstat-no" title="statement not covered" >    if (feature === fv.selectedFeature) {</span>
<span class="cstat-no" title="statement not covered" >        fv.selectedFeature = undefined;</span>
<span class="cstat-no" title="statement not covered" >        fv.selectedFeatureElement = undefined;</span>
<span class="cstat-no" title="statement not covered" >        d3.selectAll('.up_pftv_shadow')</span>
            .attr('x', 0)
            .attr('width', 0)
            .attr('transform', 'translate(0,0)');
    } else {
<span class="cstat-no" title="statement not covered" >        fv.selectedFeature = feature;</span>
<span class="cstat-no" title="statement not covered" >        fv.selectedFeatureElement = elem;</span>
<span class="cstat-no" title="statement not covered" >        this.updateShadow(feature, elem, fv);</span>
    }
<span class="cstat-no" title="statement not covered" >    var selectedPath = selectedElem.classed('up_pftv_activeFeature');</span>
<span class="cstat-no" title="statement not covered" >    d3.selectAll('svg path.up_pftv_activeFeature').classed('up_pftv_activeFeature', false);</span>
<span class="cstat-no" title="statement not covered" >    var clazz = selectedElem.attr('class'); </span>//it is not active anymore
<span class="cstat-no" title="statement not covered" >    selectedElem.classed('up_pftv_activeFeature', !selectedPath);</span>
<span class="cstat-no" title="statement not covered" >    fv.aaViewer.selectFeature(clazz);</span>
<span class="cstat-no" title="statement not covered" >    if (previousSelection.feature) {</span>
<span class="cstat-no" title="statement not covered" >        fv.dispatcher.featureDeselected(</span>
            {feature: previousSelection.feature, color: d3.select(previousSelection.elem).style("fill")}
        );
    }
<span class="cstat-no" title="statement not covered" >    if (feature !== previousSelection.feature) {</span>
<span class="cstat-no" title="statement not covered" >        fv.dispatcher.featureSelected({feature: fv.selectedFeature, color: selectedElem.style("fill")});</span>
    }
};
&nbsp;
module.exports = SelectorFactory;</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Mon Jul 20 2015 14:56:08 GMT+0100 (BST)</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
